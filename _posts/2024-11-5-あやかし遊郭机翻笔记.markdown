---
permalink: /artical/あやかし遊郭 机翻笔记
layout: post
title:  "あやかし遊郭 机翻笔记"
date: 2024-11-5 00:20:46 +0800
---

原本以为是个平平无奇的yuris引擎，结果遇上了点奇葩状况，记录一下。

文本中使用了＜／＞标识注音，我在处理文本时将所有的注音删除了。

发布后，某位网友提出会在某个地方闪退，提示为“ルビ記述エラーです”（注音标识错误），但是我检查发现文本中并没有注音符号。调查了很久的脚本，百思不得其解。

突然想到，我是将文本转化为了GBK编码的，会不会有汉字的GBK编码和注音标识重合？检查一下发现，译文中的“亜”的GBK编码和“＞”的SJIS编码重合了，导致了识别成注音符号，从而报错。

简单的解决方法是改掉这个字，但这其实是治标不治本。更好的做法是，找到文件中定义注音符号的文件，对注音符号进行修改。将userdefine文件夹中所有的文件解密后搜索，最终在 `メイン定義.txt`中找到了相关的定义，将其修改（改为对应的GBK编码）后游戏正常运行，bug修复。
